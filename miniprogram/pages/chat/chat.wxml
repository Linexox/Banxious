<view class="container">
  <!-- 顶部模式切换 -->
  <view class="mode-switch">
    <view class="mode-btn {{mode === 'concise' ? 'active' : ''}}" bindtap="onModeChange" data-mode="concise">
      <text>简洁模式</text>
    </view>
    <view class="mode-btn {{mode === 'professional' ? 'active' : ''}}" bindtap="onModeChange" data-mode="professional">
      <text>专业模式</text>
    </view>
  </view>

  <scroll-view class="chat-list" scroll-y>
    <block wx:for="{{messages}}" wx:key="index">
      <chat-message msg="{{item}}"></chat-message>
    </block>
    <view wx:if="{{loading}}" class="loading">
      <text>对方正在输入...</text>
    </view>
    
    <!-- 建议回复区域 -->
    <view class="suggestions-area" wx:if="{{suggestions.length > 0 && !loading}}">
        <view class="suggestion-chip" wx:for="{{suggestions}}" wx:key="index" bindtap="onSuggestionTap" data-text="{{item}}">
            <text>{{item}}</text>
        </view>
    </view>

    <view style="height: 120rpx;"></view> <!-- Spacer for input area -->
  </scroll-view>

  <view class="input-area">
    <chat-input bind:send="onSend" disabled="{{loading}}"></chat-input>
  </view>

  <view class="generate-btn" bindtap="onGenerateCard">
    <text>生成反焦虑卡片</text>
  </view>
</view>
