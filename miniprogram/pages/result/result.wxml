<view class="container night-mode">
  <view wx:if="{{loading}}" class="loading-text">
    <text>æ­£åœ¨æå–ç„¦è™‘æ ·æœ¬...</text>
  </view>

  <view wx:elif="{{errorMsg}}" class="error-container">
    <text class="error-text">âš ï¸ {{errorMsg}}</text>
    <button class="retry-btn" bindtap="generateCard">é‡è¯•</button>
  </view>

  <view wx:elif="{{cardData}}" class="card-container" bindtap="onFlipCard">
    <view class="card-flipper {{isFlipped ? 'flipped' : ''}} {{destroyed ? 'destroyed' : ''}}">
      
      <!-- æ­£é¢ -->
      <view class="card card-front">
        <view class="card-header">
          <text class="tag">{{cardData.mood_tag}}</text>
        </view>
        <view class="card-body">
          <text class="encouragement">{{cardData.encouragement}}</text>
          <view class="hint">ğŸ‘† ç‚¹å‡»ç¿»è½¬æŸ¥çœ‹å»ºè®®</view>
        </view>
        <view class="card-footer">
          <text class="quote">â€œ{{cardData.healing_quote}}â€</text>
        </view>
      </view>

      <!-- åé¢ -->
      <view class="card card-back">
        <view class="card-header">
          <text class="tag">Mood Lab å»ºè®®</text>
        </view>
        <view class="card-body">
          <view class="suggestion-list">
            <block wx:for="{{cardData.suggestions}}" wx:key="index">
              <view class="suggestion-item">
                <text class="bullet">â€¢</text>
                <text class="content">{{item}}</text>
              </view>
            </block>
          </view>
        </view>
        <view class="card-footer">
          <text class="quote">â€œ{{cardData.healing_quote}}â€</text>
        </view>
      </view>

    </view>
  </view>

  <view wx:if="{{!loading && !destroyed && !errorMsg}}" class="action-area">
    <button class="destroy-btn" bindtap="onDestroy">ğŸ”¥ é”€æ¯è•‰ç»¿ ğŸ”¥</button>
  </view>
  
  <view wx:if="{{destroyed}}" class="ashes">
    <text>âœ¨</text>
  </view>
</view>
